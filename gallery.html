<html>

<head>
    <title> odyssee - Gallery </title>
    <meta charset="utf-8" />
    <link rel="stylesheet" type="text/css" href="styles/all.css" media="all" />
    <link rel="stylesheet" href="https://use.typekit.net/qep5qwj.css" />
    <link rel="icon" type="image/png" href="images/icon.png" />
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="https://d3js.org/d3-drag.v1.min.js"></script>
    <script type="text/javascript" src="javascript/helper.js"></script>
    <script type="text/javascript" src="javascript/general.js"></script>
    <script type="text/javascript" src="javascript/indActFlowerGraph.js"></script>
    <script type="text/javascript" src="javascript/MoodByActivityVis.js"></script>
    <script type="text/javascript" src="javascript/MoodByActivityBursts.js"></script>
    <script type="text/javascript" src="javascript/stressorRadialGraph.js"></script>
    <script type="text/javascript" src="javascript/happinessDotPlot.js"></script>
    <script type="text/javascript" src="javascript/balanceVis.js"></script>
    <script type="text/javascript" src="javascript/depthBreadthVis.js"></script>
    <script type="text/javascript" src="javascript/ikigaiVis.js"></script>
</head>
<ul>
    <li style="float:right;vertical-align:top"><a href="about.html">About</a></li>
</ul>

<body>
    <br>
    <p style="font-family:Courier New; font-size: 23; text-align: center; margin-left:auto; margin-right:auto; padding-top:50;">Welcome to your odyssee portal!</p>

    <div style="text-align: center; color: #fff8eb; margin-bottom: 20px; display:block;">
        <svg style="margin-top: 100; margin-bottom: 100" height="700" width="1000" class="indTwoWeeks"></svg>
        <svg style="margin-top: 20; margin-bottom: 100" height="700" width="1000" class="aggTwoWeeks"></svg>
        <svg style="margin-top: 20; margin-bottom: 100" height="700" width="1000" class="indBursts"></svg>
        <svg style="margin-top: 20; margin-bottom: 100" height="500" width="1000" class="indActFlower"></svg>
        <svg style="margin-top: 20; margin-bottom: 100" height="500" width="1000" class="indActFlower2"></svg>
        <svg style="margin-top: 20; margin-bottom: 100" height="1000" width="1000" class="stressorRadial"></svg>
        <svg style="margin-top: 20; margin-bottom: 100" height="700" width="1000" class="balance"></svg>
        <svg style="margin-top: 20; margin-bottom: 100" height="700" width="1000" class="happinessDotPlot"></svg>
        <svg style="margin-top: 20; margin-bottom: 100" height="700" width="1000" class="depthBreadth"></svg>
        <svg style="margin-top: 20; margin-bottom: 100" height="700" width="1000" class="ikigaiVis"></svg>
    </div>

    <script>
        let data;
        let email = "lh484@cornell.edu"; //hardcoded
        let personData = [];
        let width = 1000;
        let height = 700;
        let padding = 50;
        let numIcons = 6;
        let textColor = "#484848";
        let backgroundColor = "#fff8eb";
        let iconWidth = 70;

        let attitudeList = ["want to", "have to", "both", "neither"];
        let categories = ["relationships", "health", "work", "logistical"];
        let dashArray2 = ["0.25 7", "5 7", "0.25 7 5 7", "1000"];
        let moodList = ["Awful", "Bad", "Ok", "Good", "Amazing"];
        let negativeMoods = ["Awful", "Bad"];

        let dashArray = {
            "I want to": "0.25 5",
            "I have to": "5 5",
            "I want to and have to": "0.25 5 5 5",
            "of something else; I neither want to nor have to": "1000"
        };
        let activityShortToLong = {}; // Configured later using everyoneData.
        let attitudeLongtoShort = {
            "I want to": "want to",
            "I have to": "have to",
            "I want to and have to": "both",
            "of something else; I neither want to nor have to": "neither"
        };
        let attitudeShorttoLong = {
            "want to": "I want to",
            "have to": "I have to",
            "both": "I want to and have to",
            "neither": "of something else; I neither want to nor have to"
        };
        let colorHexArray = {
            "Awful": "#9f265b",
            "Bad": "#ca614d",
            "Ok": "#edc3a3",
            "Good": "#f2d878",
            "Amazing": "#ffc500"
        };
        let categoryShortToLongMap = {
            "work": "Work/School",
            "health": "Health & well-being",
            "relationships": "Relationships",
            "logistical": "Logistical"
        };
        let balanceLongToShort = {
            "Yes, but I'm trying to be more focused on one aspect of my life": "yes unhappy",
            "No, but I'm trying to be more balanced": "no unhappy",
            "Yes, I'm happy with that": "yes happy",
            "No, but I'm happy with that": "no happy"
        }
        let balanceShortToLong1 = {
            "yes unhappy": "Yes, but I'm trying" ,
            "no unhappy": "No, but I'm trying",
            "yes happy": "Yes, I'm happy",
            "no happy": "No, but I'm "
        }
        let balanceShortToLong2 = {
            "yes unhappy": "to be more focused" ,
            "no unhappy": "to be more balanced",
            "yes happy": "with it",
            "no happy": "happy with it"
        }
        let moodToScore = {
            "Awful": 1,
            "Bad": 2,
            "Ok": 3,
            "Good": 4,
            "Amazing": 5
        };
        let scoreToMood = {
            1: "Awful",
            2: "Bad",
            3: "Ok",
            4: "Good",
            5: "Amazing"
        };
        let keys = {
            personality: {
                shortTermStressor: "Which of the following daily stressors is most significant for you?",
                longTermStressor: "Which of the following long-term stressors is most significant for you?",
                email: "What's your email?",
                happiness: "I am generally happy with my life. ",
            },
            everyone: {
                email: "Email",
                mood: "Feeling",
                attitude: "Reason"
            },
            ikigai: {
                email: "Email",
                contribution: "Contribution",
                happiness: "Happiness",
                category: "Ikigai ",
                money: "Money",
                passion: "Passion",
                skill: "Skill"
            }
        }

        const getData = async() => {
            // TODO for Jamal: replace next two lines with json list
            var everyoneData = await d3.csv("odyssee_data.csv");
            var personData3 = getPersonData(everyoneData, email);

            everyoneData.forEach(e => {
                let activity = e["Activity"];
                activityShortToLong[activity.split(":")[0]] = (activity.split(":")[1]).substring(1).split("(")[0]
            });

            var categoryMap = getFrequencyByKey("Activity", personData3);
            var categoryFullMap = getFrequencyByKey("Activity", personData3, 1);
            drawMoodByActvitiy(".indTwoWeeks", categoryMap, categoryFullMap, "Your last 2 weeks", personData3);

            var categoryMap2 = getFrequencyByKey("Activity", everyoneData);
            var categoryFullMap3 = getFrequencyByKey("Activity", everyoneData, 1);
            drawMoodByActvitiy(".aggTwoWeeks", categoryMap2, categoryFullMap3, "Everyone's last 2 weeks", everyoneData);
            drawMoodByActivityBursts(".indBursts", categoryMap2, categoryFullMap3, everyoneData, "Mood by Activity");

            drawIndActivityFlower(".indActFlower", "Activity", personData3);

            var personData2 = await d3.json("fakeIndActFlowerData.json");
            drawIndActivityFlower(".indActFlower2", "Activity", personData2);

            var personalityData = await d3.csv("personality.csv");
            drawStressorRadialGraph(".stressorRadial", everyoneData, personalityData);

            drawBalanceGraph(".balance", everyoneData, personalityData);

            drawHappinessDotPlot(".happinessDotPlot", everyoneData, personalityData);

            drawDepthBreadthPlot(".depthBreadth", everyoneData, personalityData);

            var ikigaiData = await d3.csv("ikigai.csv");
            drawIkigaiVis(".ikigaiVis", everyoneData, ikigaiData);
        }

        function main() {
            setUpFilters(".indTwoWeeks");
            getData();
        }

        main();
    </script>
</body>

</html>